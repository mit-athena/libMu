Top = /mit/motif
BinDir = $(Top)/$(MACHINE)bin
LibDir = $(Top)/$(MACHINE)lib
IncludeDir = $(Top)/include

IncludePath = -I$(IncludeDir) 
LibPath = -L$(LibDir)

Libs = -lMrm -lXm -lXt -lX11

UIL = $(BinDir)/uil
CC = gcc
CFLAGS = -g $(IncludePath)

SRCS = \
MuGetBoolean.c \
MuGetFileName.c \
MuGetString.c \
MuHelp.c \
MuHelpFile.c \
MuInitialize.c \
MuModalDialogs.c \
MuRegisterNames.c \
MuRegisterWidget.c \
MuSetCursor.c \
MuSetEmacsBindings.c \
MuSetTextTraversal.c \
MuSyncDialogs.c \
_MuCallbacks.c 

OBJS = \
MuGetBoolean.o \
MuGetFileName.o \
MuGetString.o \
MuHelp.o \
MuHelpFile.o \
MuInitialize.o \
MuModalDialogs.o \
MuRegisterNames.o \
MuRegisterWidget.o \
MuSetCursor.o \
MuSetEmacsBindings.o \
MuSetTextTraversal.o \
MuSyncDialogs.o \
_MuCallbacks.o 


Target = libMu.a

.c.o:
	$(CC) -c $(CFLAGS) $*.c

all: $(Target)

test2: test2.c $(Target) 
	$(CC) -o test2 test2.c $(IncludePath) $(LibPath) libMu.a $(Libs)

test: test.c $(Target)
	$(CC) -o test test.c $(IncludePath) $(LibPath) libMu.a $(Libs) 

$(Target): $(OBJS)
	rm -f $@
	ar clq $@ $(OBJS)
	ranlib $@

checkin: 
	ci -u $(SRCS) Mu.h MuP.h Makefile

clean: 
	rm -f $(Target)
	rm -f *.o *.uid *~ core

backup: 
	tar -cf MotifUtils.tar $(SRCS) Makefile
	compress MotifUtils.tar
	mv MotifUtils.tar.Z $(BackupDir)

proto:
	proto $(IncludePath) $(SRCS) > prototypes

lint:
	lint -h -b -x -z $(IncludePath) $(SRCS)

saber:
	saber $(CFLAGS) $(SRCS)
